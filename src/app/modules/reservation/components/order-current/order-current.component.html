@if (currentOrder().bookings) {
    <div class="card w-full">
        <div class="flex sm:flex-row sm:items-center p-6 gap-4 justify-between bg-color-surface-100 dark:bg-color-surface-100">
            <span>{{ currentOrder().status! | orderStatus }}</span>
            <div class="flex flex-col">
                <span class="text-sm text-surface-500 dark:text-surface-400">Passée le {{ currentOrder().createdAt | date: 'd MMMM YY' }}</span>
                <span class="text-lg font-semibold">Numéro : {{ currentOrder().orderNumber }}</span>
            </div>
        </div>

        @for (booking of currentOrder().bookings; track booking.id) {
            <app-card-item-order [booking]="booking" [orderNumber]="currentOrder().orderNumber!" [orderStatus]="currentOrder().status!"></app-card-item-order>
        }
        <div class="flex sm:flex-row sm:items-center p-6 gap-4 justify-between bg-color-surface-100 dark:bg-color-surface-100">
            <span></span>
            <div class="flex flex-col">
                @if (currentOrder().totalReduction !== 0) {
                    <div class="flex justify-between min-w-[250px]">
                        <span class="text-lg font-semibold">Total avant réduction : </span>
                        <span>{{ currentOrder().totalOriginalPrice }} €</span>
                    </div>

                    <div class="flex justify-between min-w-[250px] border-b border-surface-200 dark:border-surface-600 pb-2 mb-2">
                        <span class="text-lg text-[--primary-color]">Reduction : </span>
                        <span>{{ currentOrder().totalReduction }} €</span>
                    </div>
                }
                <div class="flex justify-between min-w-[250px]">
                    <span class="text-lg font-semibold">Total à payer : </span>
                    <span>{{ currentOrder().totalDiscountedPrice }} €</span>
                </div>
                <p-button label="Payer" styleClass="w-full mt-2" (onClick)="getcheckout()"></p-button>
            </div>
        </div>
    </div>
}
@if (currentOrder().bookings?.length === 0) {
    <div class="card w-full">Aucune réservation en cours</div>
}
